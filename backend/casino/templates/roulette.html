<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<title>ðŸŽ° Roulette â€“ Nadel-basiertes Ergebnis</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at center, #004d26, #001a0d);
    color: white;
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    height: 100vh;
    overflow: hidden;
  }

  #game-container {
    display: flex;
    width: 100%;
    padding: 15px;
  }

  #roulette-container {
    position: relative;
    width: 300px;
    height: 300px;
  }

  canvas {
    background: transparent;
    border-radius: 50%;
    display: block;
  }

  .needle {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 120px;
    background: linear-gradient(#ffd700, #b8860b);
    transform-origin: bottom center;
    transform: translate(-50%, -100%) rotate(0deg);
    border-radius: 3px;
    box-shadow: 0 0 6px rgba(255,215,0,0.9);
    pointer-events: none;
    z-index: 5;
  }

  #controls {
    margin-left: 30px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 430px;
  }

  #numbers {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    gap: 4px;
    max-width: 270px;
  }

  .number {
    width: 28px;
    height: 28px;
    font-size: 13px;
    line-height: 28px;
    text-align: center;
    font-weight: bold;
    border: 1px solid white;
    cursor: pointer;
    border-radius: 4px;
    user-select: none;
  }

  .number.red { background: #c00; color: white; }
  .number.black { background: #000; color: white; }
  .number.green { background: green; color: white; }
  .number.selected { outline: 2px solid yellow; }

  #betOptions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .betType {
    background: #222;
    padding: 4px 8px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
  }

  .betType.selected {
    background: #444;
    outline: 2px solid yellow;
  }

  select, button {
    font-size: 15px;
    padding: 6px;
    border-radius: 6px;
    border: none;
  }

  button {
    background: #228B22;
    color: white;
    cursor: pointer;
  }

  button[disabled] {
    background: #5a845a;
    opacity: 0.8;
    cursor: default;
  }

  #result {
    margin-top: 6px;
    font-weight: bold;
    font-size: 16px;
    min-height: 28px;
  }

  #balance {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 4px;
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="roulette-container">
    <canvas id="roulette" width="300" height="300"></canvas>
    <div class="needle" id="needle"></div>
  </div>

  <div id="controls">
    <h2>Roulette</h2>
    <div id="balance">ðŸ’° Guthaben: 1000</div>

    <div id="numbers"></div>

    <div id="betOptions">
      <div class="betType" data-type="red">Rot</div>
      <div class="betType" data-type="black">Schwarz</div>
      <div class="betType" data-type="even">Gerade</div>
      <div class="betType" data-type="odd">Ungerade</div>
    </div>

    <label for="betAmount">Einsatz:</label>
    <select id="betAmount">
      <option value="10">10</option>
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="500">500</option>
    </select>

    <button id="spinBtn">Spin</button>
    <div id="result"></div>
  </div>
</div>

<script>
const canvas = document.getElementById("roulette");
const ctx = canvas.getContext("2d");
const needle = document.getElementById("needle");
const numbersDiv = document.getElementById("numbers");
const spinBtn = document.getElementById("spinBtn");
const resultDiv = document.getElementById("result");
const balanceDiv = document.getElementById("balance");

const radius = 120;

const wheelOrder = [
Â  0,32,15,19,4,21,2,25,17,34,6,
Â  27,13,36,11,30,8,23,10,5,24,
Â  16,33,1,20,14,31,9,22,18,29,
Â  7,28,12,35,3,26
];

const redSet = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
const colors = {};
wheelOrder.forEach(n => {
Â  if (n === 0) colors[n] = "green";
Â  else if (redSet.has(n)) colors[n] = "red";
Â  else colors[n] = "black";
});

let balance = 1000;
let spinning = false;

/* --- Zeichne Roulette-Scheibe (unverÃ¤ndert) --- */
function drawWheel() {
Â  const cx = canvas.width / 2, cy = canvas.height / 2;
Â  const slice = 2 * Math.PI / wheelOrder.length;
Â  ctx.clearRect(0, 0, canvas.width, canvas.height);

Â  // Holzrahmen
Â  ctx.beginPath();
Â  ctx.arc(cx, cy, radius + 16, 0, 2 * Math.PI);
Â  const wood = ctx.createLinearGradient(0, 0, 0, canvas.height);
Â  wood.addColorStop(0, "#7b4b26");
Â  wood.addColorStop(1, "#2b1508");
Â  ctx.fillStyle = wood;
Â  ctx.fill();

Â  for (let i = 0; i < wheelOrder.length; i++) {
Â  Â  const start = -Math.PI / 2 + i * slice;
Â  Â  const end = start + slice;

Â  Â  ctx.beginPath();
Â  Â  ctx.moveTo(cx, cy);
Â  Â  ctx.arc(cx, cy, radius, start, end);
Â  Â  ctx.closePath();
Â  Â  const col = colors[wheelOrder[i]];
Â  Â  ctx.fillStyle = col === "red" ? "#c00" : col === "black" ? "#111" : "#0b9a45";
Â  Â  ctx.fill();

Â  Â  ctx.save();
Â  Â  ctx.translate(cx, cy);
Â  Â  ctx.rotate(start + slice / 2);
Â  Â  ctx.textAlign = "center";
Â  Â  ctx.textBaseline = "middle";
Â  Â  ctx.fillStyle = "white";
Â  Â  ctx.font = "bold 13px Arial";
Â  Â  ctx.fillText(wheelOrder[i], radius - 25, 0);
Â  Â  ctx.restore();
Â  }

Â  ctx.beginPath();
Â  ctx.arc(cx, cy, 50, 0, Math.PI * 2);
Â  ctx.fillStyle = "gold";
Â  ctx.fill();
}

/* --- Zahl-Buttons (unverÃ¤ndert) --- */
function buildNumbers() {
Â  wheelOrder.forEach(n => {
Â  Â  const div = document.createElement("div");
Â  Â  div.className = "number " + colors[n];
Â  Â  div.textContent = n;
Â  Â  div.dataset.num = n;
Â  Â  div.onclick = () => {
Â  Â  Â  document.querySelectorAll(".number").forEach(e => e.classList.remove("selected"));
Â  Â  Â  document.querySelectorAll(".betType").forEach(e => e.classList.remove("selected"));
Â  Â  Â  div.classList.add("selected");
Â  Â  };
Â  Â  numbersDiv.appendChild(div);
Â  });
}

/* --- Bet-Options (unverÃ¤ndert) --- */
document.querySelectorAll(".betType").forEach(b => {
Â  b.onclick = () => {
Â  Â  document.querySelectorAll(".betType").forEach(x => x.classList.remove("selected"));
Â  Â  document.querySelectorAll(".number").forEach(x => x.classList.remove("selected"));
Â  Â  b.classList.add("selected");
Â  };
});

/* --- Spin-Funktion (Ãœberarbeitet) --- */
spinBtn.onclick = () => {
Â  if (spinning) return;
Â  const bet = parseInt(document.getElementById("betAmount").value);
Â  if (balance < bet) {
Â  Â  resultDiv.textContent = "âŒ Nicht genug Guthaben!";
Â  Â  return;
Â  }

Â  const selectedNumber = document.querySelector(".number.selected");
Â  const selectedType = document.querySelector(".betType.selected");

Â  if (!selectedNumber && !selectedType) {
Â  Â  resultDiv.textContent = "Bitte Zahl oder Kategorie wÃ¤hlen!";
Â  Â  return;
Â  }

Â  spinning = true;
Â  spinBtn.disabled = true;
Â  resultDiv.textContent = "Spinne...";
Â  balance -= bet;
Â  balanceDiv.textContent = "ðŸ’° Guthaben: " + balance;

Â  // 1. ZufÃ¤llige Endposition bestimmen
Â  const randomAngle = Math.random() * 360; // Ein Winkel zwischen 0 und 360 Grad
Â  const fullSpins = 5 * 360;
Â  // Die Nadel dreht sich mindestens 5 volle Runden plus den zufÃ¤lligen Winkel
Â  const totalRotation = fullSpins + randomAngle;

Â  const duration = 4000;
Â  const start = performance.now();

Â  function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }

Â  function frame(now) {
Â  Â  const elapsed = now - start;
Â  Â  const progress = Math.min(1, elapsed / duration);
Â  Â  const eased = easeOutCubic(progress);
Â  Â  const current = totalRotation * eased; // Aktueller Rotationswinkel
Â  Â  needle.style.transform = `translate(-50%,-100%) rotate(${current}deg)`;

Â  Â  if (progress < 1) {
Â  Â  Â  requestAnimationFrame(frame);
Â  Â  } else {
Â  Â  Â  // 2. Finale Zahl anhand des tatsÃ¤chlichen Endwinkels ermitteln (current)
Â  Â  Â  const slice = 360 / wheelOrder.length;
Â  Â  Â  // Der finale Winkel, bereinigt auf 0-360 Grad
Â  Â  Â  // Die Drehung ist im Uhrzeigersinn, aber die Index-ZÃ¤hlung ist gegen den Uhrzeigersinn.
Â  Â  Â  // AuÃŸerdem zeigt die Nadel nach oben (-90 Grad zur 0-Achse).
Â  Â  Â  const finalAngle = (current % 360 + 360) % 360;

Â  Â  Â  // Wichtig: Die Roulette-Scheibe ist so gezeichnet, dass die Zahl **entgegengesetzt**
Â  Â  Â  // zur Nadelposition steht. Die Nadel zeigt nach oben (270Â° im mathematischen Sinn, 0Â° im CSS),
Â  Â  Â  // und die Sektoren sind gegen den Uhrzeigersinn angeordnet (0 ist im Osten).
Â  Â  Â  // Die Logik fÃ¼r die Index-Berechnung muss angepasst werden,
Â  Â  Â  // um den tatsÃ¤chlichen Sektor unter der Nadel zu treffen.
Â  Â  Â  
Â  Â  Â  // Wir berechnen, wie weit der Rotationswinkel **gegen** die Sektor-Anordnung liegt.
Â  Â  Â  // Die Nadel (die oben steht) zeigt auf den Sektor, der um 90 Grad (oder 270 Grad, je nach ZÃ¤hlrichtung) versetzt ist.
Â  Â  Â  // Die Formel: (Gesamtwinkel - 90Â°) % 360 / Scheibensegment-GrÃ¶ÃŸe.
Â  Â  Â  // Wir nutzen 270 Grad, um die korrekte Position im Array (das bei 0/Osten startet) zu treffen.
Â  Â  Â  const adjustedAngle = (finalAngle + 270) % 360;
Â  Â  Â  
Â  Â  Â  // Math.floor ermittelt den Index des Sektors, auf dem der adjustierte Winkel liegt.
Â  Â  Â  const index = Math.floor(adjustedAngle / slice);
Â  Â  Â  const finalNumber = wheelOrder[index];

Â  Â  Â  finishSpin(finalNumber, bet, selectedNumber, selectedType);
Â  Â  Â  spinning = false;
Â  Â  Â  spinBtn.disabled = false;
Â  Â  }
Â  }

Â  requestAnimationFrame(frame);
};

/* --- Gewinnermittlung (unverÃ¤ndert) --- */
function finishSpin(num, bet, selNum, selType) {
Â  const color = colors[num];
Â  let win = 0, msg = `ðŸŽ¯ Zahl: ${num} (${color}) â€” `;

Â  if (selNum) {
Â  Â  if (parseInt(selNum.dataset.num) === num) {
Â  Â  Â  win = bet * 36;
Â  Â  Â  msg += "Treffer! Gewinn " + win;
Â  Â  } else msg += "verloren.";
Â  } else if (selType) {
Â  Â  const t = selType.dataset.type;
Â  Â  let success = false;
Â  Â  if (t === "red" && color === "red") success = true;
Â  Â  if (t === "black" && color === "black") success = true;
Â  Â  if (t === "even" && num !== 0 && num % 2 === 0) success = true;
Â  Â  if (t === "odd" && num !== 0 && num % 2 === 1) success = true;
Â  Â  if (success) {
Â  Â  Â  win = bet * 2;
Â  Â  Â  msg += "richtig! Gewinn " + win;
Â  Â  } else msg += "falsch.";
Â  }

Â  balance += win;
Â  balanceDiv.textContent = "ðŸ’° Guthaben: " + balance;
Â  resultDiv.textContent = msg;
}

/* --- Start (unverÃ¤ndert) --- */
drawWheel();
buildNumbers();
</script>
</body>
</html>













