<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8" />
<title>ðŸŽ° Roulette â€“ Nadel-basiertes Ergebnis</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at center, #004d26, #001a0d);
    color: white;
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    height: 100vh;
    overflow: hidden;
  }

  #game-container {
    display: flex;
    width: 100%;
    padding: 15px;
  }

  #roulette-container {
    position: relative;
    width: 300px;
    height: 300px;
  }

  canvas {
    background: transparent;
    border-radius: 50%;
    display: block;
  }

  .needle {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 120px;
    background: linear-gradient(#ffd700, #b8860b);
    transform-origin: bottom center;
    transform: translate(-50%, -100%) rotate(0deg);
    border-radius: 3px;
    box-shadow: 0 0 6px rgba(255,215,0,0.9);
    pointer-events: none;
    z-index: 5;
  }

  #controls {
    margin-left: 30px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    width: 430px;
  }

  #numbers {
    display: grid;
    grid-template-columns: repeat(9, 1fr);
    gap: 4px;
    max-width: 270px;
  }

  .number {
    width: 28px;
    height: 28px;
    font-size: 13px;
    line-height: 28px;
    text-align: center;
    font-weight: bold;
    border: 1px solid white;
    cursor: pointer;
    border-radius: 4px;
    user-select: none;
  }

  .number.red { background: #c00; color: white; }
  .number.black { background: #000; color: white; }
  .number.green { background: green; color: white; }
  .number.selected { outline: 2px solid yellow; }

  #betOptions {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .betType {
    background: #222;
    padding: 4px 8px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
  }

  .betType.selected {
    background: #444;
    outline: 2px solid yellow;
  }

  select, button {
    font-size: 15px;
    padding: 6px;
    border-radius: 6px;
    border: none;
  }

  button {
    background: #228B22;
    color: white;
    cursor: pointer;
  }

  button[disabled] {
    background: #5a845a;
    opacity: 0.8;
    cursor: default;
  }

  #result {
    margin-top: 6px;
    font-weight: bold;
    font-size: 16px;
    min-height: 28px;
  }

  #balance {
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 4px;
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="roulette-container">
    <canvas id="roulette" width="300" height="300"></canvas>
    <div class="needle" id="needle"></div>
  </div>

  <div id="controls">
    <h2>Roulette</h2>
    <div id="balance">ðŸ’° Guthaben: 1000</div>

    <div id="numbers"></div>

    <div id="betOptions">
      <div class="betType" data-type="red">Rot</div>
      <div class="betType" data-type="black">Schwarz</div>
      <div class="betType" data-type="even">Gerade</div>
      <div class="betType" data-type="odd">Ungerade</div>
    </div>

    <label for="betAmount">Einsatz:</label>
    <select id="betAmount">
      <option value="10">10</option>
      <option value="50">50</option>
      <option value="100">100</option>
      <option value="500">500</option>
    </select>

    <button id="spinBtn">Spin</button>
    <div id="result"></div>
  </div>
</div>

<script>
const canvas = document.getElementById("roulette");
const ctx = canvas.getContext("2d");
const needle = document.getElementById("needle");
const numbersDiv = document.getElementById("numbers");
const spinBtn = document.getElementById("spinBtn");
const resultDiv = document.getElementById("result");
const balanceDiv = document.getElementById("balance");

const radius = 120;

const wheelOrder = [
Â  0,32,15,19,4,21,2,25,17,34,6,
Â  27,13,36,11,30,8,23,10,5,24,
Â  16,33,1,20,14,31,9,22,18,29,
Â  7,28,12,35,3,26
];

const redSet = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
const colors = {};
wheelOrder.forEach(n => {
Â  if (n === 0) colors[n] = "green";
Â  else if (redSet.has(n)) colors[n] = "red";
Â  else colors[n] = "black";
});

let balance = 1000;
let spinning = false;

/* --- Zeichne Roulette-Scheibe (unverÃ¤ndert) --- */
function drawWheel() {
Â  const cx = canvas.width / 2, cy = canvas.height / 2;
Â  const slice = 2 * Math.PI / wheelOrder.length;
Â  ctx.clearRect(0, 0, canvas.width, canvas.height);

Â  // Holzrahmen
Â  ctx.beginPath();
Â  ctx.arc(cx, cy, radius + 16, 0, 2 * Math.PI);
Â  const wood = ctx.createLinearGradient(0, 0, 0, canvas.height);
Â  wood.addColorStop(0, "#7b4b26");
Â  wood.addColorStop(1, "#2b1508");
Â  ctx.fillStyle = wood;
Â  ctx.fill();

Â  for (let i = 0; i < wheelOrder.length; i++) {
Â  Â  const start = -Math.PI / 2 + i * slice;
Â  Â  const end = start + slice;

Â  Â  ctx.beginPath();
Â  Â  ctx.moveTo(cx, cy);
Â  Â  ctx.arc(cx, cy, radius, start, end);
Â  Â  ctx.closePath();
Â  Â  const col = colors[wheelOrder[i]];
Â  Â  ctx.fillStyle = col === "red" ? "#c00" : col === "black" ? "#111" : "#0b9a45";
Â  Â  ctx.fill();

Â  Â  ctx.save();
Â  Â  ctx.translate(cx, cy);
Â  Â  ctx.rotate(start + slice / 2);
Â  Â  ctx.textAlign = "center";
Â  Â  ctx.textBaseline = "middle";
Â  Â  ctx.fillStyle = "white";
Â  Â  ctx.font = "bold 13px Arial";
Â  Â  ctx.fillText(wheelOrder[i], radius - 25, 0);
Â  Â  ctx.restore();
Â  }

Â  ctx.beginPath();
Â  ctx.arc(cx, cy, 50, 0, Math.PI * 2);
Â  ctx.fillStyle = "gold";
Â  ctx.fill();
}

/* --- Zahl-Buttons (unverÃ¤ndert) --- */
function buildNumbers() {
Â  wheelOrder.forEach(n => {
Â  Â  const div = document.createElement("div");
Â  Â  div.className = "number " + colors[n];
Â  Â  div.textContent = n;
Â  Â  div.dataset.num = n;
Â  Â  div.onclick = () => {
Â  Â  Â  document.querySelectorAll(".number").forEach(e => e.classList.remove("selected"));
Â  Â  Â  document.querySelectorAll(".betType").forEach(e => e.classList.remove("selected"));
Â  Â  Â  div.classList.add("selected");
Â  Â  };
Â  Â  numbersDiv.appendChild(div);
Â  });
}

/* --- Bet-Options (unverÃ¤ndert) --- */
document.querySelectorAll(".betType").forEach(b => {
Â  b.onclick = () => {
Â  Â  document.querySelectorAll(".betType").forEach(x => x.classList.remove("selected"));
Â  Â  document.querySelectorAll(".number").forEach(x => x.classList.remove("selected"));
Â  Â  b.classList.add("selected");
Â  };
});

/* --- Spin-Funktion (Ãœberarbeitet) --- */
/* --- Spin-Funktion (Nadel landet auf gezogener Zahl) --- */
spinBtn.onclick = () => {
  if (spinning) return;
  const bet = parseInt(document.getElementById("betAmount").value);
  if (balance < bet) {
    resultDiv.textContent = "âŒ Nicht genug Guthaben!";
    return;
  }

  const selectedNumber = document.querySelector(".number.selected");
  const selectedType = document.querySelector(".betType.selected");

  if (!selectedNumber && !selectedType) {
    resultDiv.textContent = "Bitte Zahl oder Kategorie wÃ¤hlen!";
    return;
  }

  spinning = true;
  spinBtn.disabled = true;
  resultDiv.textContent = "Spinne...";
  balance -= bet;
  balanceDiv.textContent = "ðŸ’° Guthaben: " + balance;

  // --- 1. ZufÃ¤llige Zahl auswÃ¤hlen ---
  const winningIndex = Math.floor(Math.random() * wheelOrder.length);
  const winningNumber = wheelOrder[winningIndex];

  // --- 2. Winkel berechnen, auf dem die Nadel landen soll ---
  const slice = 360 / wheelOrder.length;
  // Das Roulette ist gegen den Uhrzeigersinn gezeichnet und 0Â° liegt rechts (Osten),
  // die Nadel zeigt oben (270Â°).
  // Damit die Nadel genau auf die Zahl zeigt, addieren wir 90Â° zur Differenz.
  const targetAngle = (winningIndex * slice + 90) % 360;

  // --- 3. Animation mit mehreren Umdrehungen ---
  const fullSpins = 5 * 360; // 5 volle Drehungen
  const totalRotation = fullSpins + targetAngle;

  const duration = 4000;
  const start = performance.now();

  function easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); }

  function frame(now) {
    const elapsed = now - start;
    const progress = Math.min(1, elapsed / duration);
    const eased = easeOutCubic(progress);
    const current = totalRotation * eased;
    needle.style.transform = `translate(-50%,-100%) rotate(${current}deg)`;

    if (progress < 1) {
      requestAnimationFrame(frame);
    } else {
      // Nach der Drehung das tatsÃ¤chliche Ergebnis anzeigen
      finishSpin(winningNumber, bet, selectedNumber, selectedType);
      spinning = false;
      spinBtn.disabled = false;
    }
  }

  requestAnimationFrame(frame);
};

/* --- Gewinnermittlung (unverÃ¤ndert) --- */
function finishSpin(num, bet, selNum, selType) {
Â  const color = colors[num];
Â  let win = 0, msg = `ðŸŽ¯ Zahl: ${num} (${color}) â€” `;

Â  if (selNum) {
Â  Â  if (parseInt(selNum.dataset.num) === num) {
Â  Â  Â  win = bet * 36;
Â  Â  Â  msg += "Treffer! Gewinn " + win;
Â  Â  } else msg += "verloren.";
Â  } else if (selType) {
Â  Â  const t = selType.dataset.type;
Â  Â  let success = false;
Â  Â  if (t === "red" && color === "red") success = true;
Â  Â  if (t === "black" && color === "black") success = true;
Â  Â  if (t === "even" && num !== 0 && num % 2 === 0) success = true;
Â  Â  if (t === "odd" && num !== 0 && num % 2 === 1) success = true;
Â  Â  if (success) {
Â  Â  Â  win = bet * 2;
Â  Â  Â  msg += "richtig! Gewinn " + win;
Â  Â  } else msg += "falsch.";
Â  }

Â  balance += win;
Â  balanceDiv.textContent = "ðŸ’° Guthaben: " + balance;
Â  resultDiv.textContent = msg;
}

/* --- Start (unverÃ¤ndert) --- */
drawWheel();
buildNumbers();
</script>
</body>
</html>













